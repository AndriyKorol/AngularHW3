<div class="container">
  <div class="card mb-3">
    <div class="card-body">
      <h4>Fill a form:</h4>
      <form novalidate (ngSubmit)="onSubmit(form)" #form="ngForm">
        <div class="form-row">
          <div class="form-group col-md-6">
            <input
              type="text"
              class="form-control"
              [ngClass]="{'is-invalid':  (itemName.errors && itemName.touched) || (itemName.errors && form.submitted) }"
              #itemName="ngModel"
              id="name"
              [(ngModel)]="item.name"
              name="name"
              placeholder="Your name*"
              required
              minlength="2"
            >
            <div class="invalid-feedback" [hidden]="!itemName.errors?.touched">Field is required</div>
            <div class="invalid-feedback" [hidden]="!itemName.errors?.required">Field is required</div>
            <div class="invalid-feedback" [hidden]="!itemName.errors?.minlength">Field should has more characters</div>
          </div>
          <div class="form-group col-md-6">
            <input
              type="email"
              class="form-control"
              id="email"
              [ngClass]="{'is-invalid': (itemEmail.errors && itemEmail.touched) || (itemEmail.errors && form.submitted)}"
              [(ngModel)]="item.email"
              #itemEmail="ngModel"
              name="email"
              placeholder="Your email*"
              minlength="1"
              required
              email
            >
            <div class="invalid-feedback" [hidden]="!itemEmail.errors?.required">Field is required</div>
            <div class="invalid-feedback" [hidden]="!itemEmail.errors?.touched">Field is required</div>
            <div class="invalid-feedback" [hidden]="!itemEmail.errors?.minlength">Field is required</div>
            <div class="invalid-feedback" [hidden]="!itemEmail.errors?.email ">Email address is invalid</div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <input
              type="number"
              class="form-control"
              id="age"
              [ngClass]="{'is-invalid': itemAge.errors && itemAge.touched}"
              [(ngModel)]="item.age"
              #itemAge="ngModel"
              name="age"
              placeholder="How old are you?"
              pattern="[0-9]{1,}"
              minlength="1"
            >
            <div class="invalid-feedback" [hidden]="!itemAge.errors?.touched">Field is required</div>
            <div class="invalid-feedback" [hidden]="!itemAge.errors?.pattern">Please fill correctly</div>
          </div>
          <div class="form-group col-md-6">
            <input
              type="number"
              class="form-control"
              id="phone"
              [ngClass]="{'is-invalid': itemPhone.errors && itemAge.touched}"
              [(ngModel)]="item.phone"
              #itemPhone="ngModel"
              name="phone"
              placeholder="+380XXXXXXXXX"
              pattern="^\+?\d{1,3}?[- .]?\(?(?:\d{2,3})\)?[- .]?\d\d\d[- .]?\d\d\d\d$"
            >
            <div class="invalid-feedback" [hidden]="!itemPhone.errors?.pattern">Please fill correctly</div>
          </div>
        </div>
        <div class="form-group">
          <textarea
            type="text"
            class="form-control"
            id="comment"
            [ngClass]="{'is-invalid': itemTextArea.errors}"
            [(ngModel)]="item.comment"
            #itemTextArea="ngModel"
            name="comment"
            placeholder="Your comment"
            minlength="2"
          ></textarea>
          <div class="invalid-feedback" [hidden]="!itemTextArea.errors?.minlength">Comment should has more characters</div>
        </div>
        <button type="submit" class="btn btn-primary" >Add</button>
      </form>
    </div>
  </div>
  <table class="table table-striped mb-3" >
      <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Age</th>
        <th scope="col">Phone#</th>
        <th scope="col">Comments</th>
        <th scope="col">Action</th>
      </tr>
      </thead>
      <tbody *ngFor="let item of shoppingList, let i = index">
      <tr >
        <td >{{ item.id }}</td>
        <td >{{ item.name }}</td>
        <td >{{ item.email }}</td>
        <td >{{ item.age }}</td>
        <td >{{ item.phone }}</td>
        <td >{{ item.comment }}</td>
        <td ><a href="#" (click)="deleteItem(item.id)">Delete</a></td>
      </tr>
      </tbody>
    </table>
</div>
